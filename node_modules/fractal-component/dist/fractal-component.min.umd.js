!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("redux-saga"),require("redux-saga/effects"),require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","redux-saga","redux-saga/effects","react","prop-types"],e):e(t.FractalComponent={},t.ReduxSaga,t.ReduxSaga.effects,t.React,t.PropTypes)}(this,function(t,f,p,e,n){"use strict";var a="default"in f?f.default:f;e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function r(t,e){return t(e={exports:{}},e.exports),e.exports}var i,h=r(function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}t.exports=e});i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var o,s,l=("function"==typeof(s=i.Symbol)?s.observable?o=s.observable:(o=s("observable"),s.observable=o):o="@@observable",o),c=function(){return Math.random().toString(36).substring(7).split("").join(".")},d={INIT:"@@redux/INIT"+c(),REPLACE:"@@redux/REPLACE"+c(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+c()}};function g(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(g)(t,e)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var i=t,a=e,o=[],s=o,c=!1;function u(){s===o&&(s=o.slice())}function f(){if(c)throw Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function p(e){if("function"!=typeof e)throw Error("Expected the listener to be a function.");if(c)throw Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var n=!0;return u(),s.push(e),function(){if(n){if(c)throw Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");n=!1,u();var t=s.indexOf(e);s.splice(t,1)}}}function h(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw Error("Reducers may not dispatch actions.");try{c=!0,a=i(a,t)}finally{c=!1}for(var e=o=s,n=0;n<e.length;n++){(0,e[n])()}return t}return h({type:d.INIT}),(r={dispatch:h,subscribe:p,getState:f,replaceReducer:function(t){if("function"!=typeof t)throw Error("Expected the nextReducer to be a function.");i=t,h({type:d.REPLACE})}})[l]=function(){var t,n=p;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function e(){t.next&&t.next(f())}return e(),{unsubscribe:n(e)}}})[l]=function(){return this},t},r}function u(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function y(){for(var t=arguments.length,a=Array(t),e=0;e<t;e++)a[e]=arguments[e];return function(i){return function(){var t=i.apply(void 0,arguments),e=function(){throw Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:t.getState,dispatch:function(){return e.apply(void 0,arguments)}},r=a.map(function(t){return t(n)});return function(i){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},e=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),e.forEach(function(t){var e,n,r;r=a[n=t],n in(e=i)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return i}({},t,{dispatch:e=u.apply(void 0,r)(t.dispatch)})}}}var m="fractal-component",b="3.4.2",w=Symbol("@@"+m+"/NAMESPACED"),x=function(t){return null==t},S=function(t){return null!=t},R=function(t){return"function"==typeof t},E=function(t){return"number"==typeof t},k=function(t){return"string"==typeof t},O=Array.isArray,C=function(t){return t&&!O(t)&&"object"==typeof t},A=function(t){return!!t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype},I="boolean"==typeof v,P=function(t){return C(t)&&A(t.type)},T=function(t){return P(t)&&t[w]},j=Object.freeze({undef:x,notUndef:S,func:R,number:E,string:k,array:O,object:C,promise:function(t){return t&&R(t.then)},iterator:function(t){return t&&R(t.next)&&R(t.throw)},iterable:function(t){return t&&R(Symbol)?R(t[Symbol.iterator]):O(t)},observable:function(t){return t&&R(t.subscribe)},buffer:function(t){return t&&R(t.isEmpty)&&R(t.take)&&R(t.put)},pattern:function(t){return t&&(k(t)||A(t)||R(t)||O(t))},channel:function(t){return t&&R(t.take)&&R(t.close)},stringableFunc:function(t){return R(t)&&t.hasOwnProperty("toString")},symbol:A,bool:I,action:P,namespacedAction:T}),D=!1;"object"==typeof process&&S(process.env)&&S("production");var L=null,M=function(){return null===L&&(L="object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)),L},N=null,_=function(){if(null!==N)return N;if(!M())return N={pid:null,macAddr:"",macAddrInt:null};var t="",e=null,n=null;try{var r,i=require("os").networkInterfaces();for(r in i){for(var a=i[r],o=a.length,s=0;s<o;s++)if(a[s].mac&&"00:00:00:00:00:00"!=a[s].mac){t=a[s].mac;break}if(""!==t)break}n=process&&process.pid?process.pid:null,e=t?parseInt(t.replace(/\:|\D+/gi,"")):null,isNaN(e)&&(e=null)}catch(t){}return N={pid:n,macAddr:t,macAddrInt:e}},F=null,U=function(){return m},G=function(){return D},z=function(t,e,n){void 0===e&&(e="log"),void 0===n&&(n=""),"undefined"==typeof window?console.log("fractal-component "+e+": "+t+"\n"+(n&&n.stack||n)):console[e](t,n)},B=function(t){return t?k(t)?t.trim():(t+"").trim():""},q=function(t){return function(){return t}},Y=q(!0),K=function(){},W=function(t){var e=0,n=t||(this?this.namespace:"");if(!n)throw Error("createClassNameGenerator: namespace cannot be empty!");var r=n.replace(/[^a-zA-Z0-9-]/g,"-");return function(){return r+"-"+(e+=1)}},X=function(t){return Symbol.prototype.toString.apply(t)},H=Object.freeze({isInNode:M,getMachineInfo:_,uniqid:function(t){var e=_(),n=e.pid,r=e.macAddrInt;n=E(n)&&n?n.toString(36):"",r=E(r)&&r?r.toString(36):"";var i=Date.now(),a=F||i;return(t||"")+r+n+(F=a<i?i:a+1).toString(36)},getPackageName:U,getPackageVersion:function(){return b},isDevMode:G,log:z,trim:B,konst:q,kTrue:Y,kFalse:q(!1),noop:K,identity:function(t){return t},is:j,createClassNameGenerator:W,symbolToString:X}),V=function(){function t(t){if(this.cwd=Q(t),-1!=this.cwd.indexOf("*"))throw Error("`cwd` cannot contains `*`");-1!=this.cwd.indexOf(".")&&(this.cwd=this.compressPath(this.cwd))}var e=t.prototype;return e.getLastSegment=function(){var t=this.cwd.lastIndexOf("/");return t<this.cwd.length-1?this.cwd.substring(t+1):""},e.compressPath=function(t,e){void 0===e&&(e=!0),k(t)&&(t=[t]);var n=[];return t.map(function(t){return t.trim()}).forEach(function(t){if(-1!=t.indexOf("*"))throw Error("Failed to resolve path: path segments cannot contain `*`");t.split("/").forEach(function(t){switch(t=B(t)){case"":case".":break;case"..":n.length?n.pop():e||n.push("..");break;default:n.push(t)}})}),n.join("/")},e.resolve=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=[this.cwd].concat(e);return this.compressPath(r)},e.convertNamespacedAction=function(t,e){var n;if(!C(t))throw Error("Tried to dispatch action in invalid type: "+typeof t);if(!A(t.type))throw Error("action.type cannot be "+typeof t.type+" and must be a Symbol");var r=Q(e),i=!1;r.length&&"*"===r[r.length-1]&&(i=!0,r=Q(r.substring(0,r.length-1)));var a=this.resolve(r),o=h({},t,((n={})[w]=!0,n.isMulticast=i,n.currentSenderPath=this.cwd,n.currentDispatchPath=a,n.currentComponentId=this.getLastSegment(),n));return o.senderPath||(o.senderPath=o.currentSenderPath),o.dispatchPath||(o.dispatchPath=o.currentDispatchPath),o.componentId||(o.componentId=o.currentComponentId),o},t}(),J=function(){function t(t){void 0===t&&(t=!1),this.paths=[],this.dataStore={},this.shouldKeepOrder=t}var e=t.prototype;return e.destroy=function(){this.paths=[],this.dataStore={}},e.add=function(t,e){return void 0===e&&(e=void 0),Z(t),t=Q(t),-1!=this.paths.indexOf(t)?null:(this.paths.push(t),this.shouldKeepOrder&&this.paths.sort(function(t,e){return t.length<e.length?-1:e.length<t.length?1:void 0}),S(e)&&(this.dataStore[t]=e),t)},e.getPathData=function(t){var e=this.dataStore[t];return e||{}},e.setPathData=function(t,e){this.dataStore[t]=e},e.mergePathData=function(t,e){this.dataStore[t]=C(this.dataStore[t])?Object.assign({},this.dataStore[t],e):e},e.removePathData=function(t){delete this.dataStore[t]},e.foreach=function(e){var n=this;Object.keys(this.dataStore).forEach(function(t){return e(n.dataStore[t],t)})},e.map=function(e){var n=this;return Object.keys(this.dataStore).map(function(t){return e(n.dataStore[t],t)})},e.searchPathByPathData=function(e){var n=this;if(!R(e))throw Error("searchPathByPathData require function as parameter!");return Object.keys(this.dataStore).find(function(t){return e(n.dataStore[t])})},e.remove=function(e){Z(e),e=Q(e),this.paths=this.paths.filter(function(t){return t!==e}),delete this.dataStore[e]},e.exist=function(t){return-1!=this.paths.indexOf(t)},e.isAllowedMulticast=function(t,e){var n=this.getPathData(t).allowedIncomingMulticastActionTypes;if(!n)return!1;if(k(n)&&"*"===n)return!0;if(A(n))return n===e;if(!O(n))throw Error("PathRegistry.isAllowedMulticast: invalid `allowedIncomingMulticastActionTypes` option type. ");return-1!=n.indexOf(e)},e.searchDispatchPaths=function(r){var i=this;if(!this.shouldKeepOrder)throw Error("`searchDispatchPaths` method requires PathRegistry to be initialised in `keepOrder` mode.");if(!0!==r[w])throw Error("PathRegistry: cannot searchDispatchPaths for a non-namespaced action.");var a=r.currentDispatchPath;if(!r.isMulticast)return this.exist(a)?[a]:[];var o=[];return this.paths.filter(function(e){if(""!==a&&0!=e.indexOf(a+"/")&&e!==a)return!1;if(-1!==o.findIndex(function(t){return-1!=e.indexOf(t+"/")}))return!1;if("*"===i.getPathData(e).allowedIncomingMulticastActionTypes){var t=(i.dataStore[e]?i.dataStore[e]:{}).localPathPos;return!E(t)||(t-2<=a.length-1||(o.push(e),!1))}var n=i.isAllowedMulticast(e,r.type);return n||o.push(e),n})},t}();function Z(t){if(-1!=t.indexOf("*"))throw Error("path cannot contain `*`")}function Q(t,e){return void 0===e&&(e=!1),t=B(t),e&&(t=t.toLowerCase()),"/"===t[0]&&(t=1===t.length?"":t.substring(1)),"/"===t[t.length-1]&&(t=1===t.length?"":t.substring(0,t.length-1)),t}var $=r(function(t){t.exports=function(){var e=Object.prototype.toString;function a(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function f(t){if(!t)return!0;if(h(t)&&0===t.length)return!0;if("string"==typeof t)return!1;for(var e in t)if(a(t,e))return!1;return!0}function p(t){return e.call(t)}var h=Array.isArray||function(t){return"[object Array]"===e.call(t)};function l(t){var e=parseInt(t);return""+e===t?e:t}function t(i){i=i||{};var o=function(n){return Object.keys(o).reduce(function(t,e){return"create"===e||"function"==typeof o[e]&&(t[e]=o[e].bind(o,n)),t},{})};function s(t,e){return i.includeInheritedProps||"number"==typeof e&&Array.isArray(t)||a(t,e)}function c(t,e){if(s(t,e))return t[e]}function u(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return u(t,e.split(".").map(l),n,r);var i=e[0],a=c(t,i);return 1===e.length?(void 0!==a&&r||(t[i]=n),a):(void 0===a&&(t[i]="number"==typeof e[1]?[]:{}),u(t[i],e.slice(1),n,r))}return o.has=function(t,e){if("number"==typeof e?e=[e]:"string"==typeof e&&(e=e.split(".")),!e||0===e.length)return!!t;for(var n=0;n<e.length;n++){var r=l(e[n]);if(!("number"==typeof r&&h(t)&&r<t.length||(i.includeInheritedProps?r in Object(t):a(t,r))))return!1;t=t[r]}return!0},o.ensureExists=function(t,e,n){return u(t,e,n,!0)},o.set=function(t,e,n,r){return u(t,e,n,r)},o.insert=function(t,e,n,r){var i=o.get(t,e);r=~~r,h(i)||o.set(t,e,i=[]),i.splice(r,0,n)},o.empty=function(t,e){var n,r;if(!f(e)&&null!=t&&(n=o.get(t,e))){if("string"==typeof n)return o.set(t,e,"");if("boolean"==typeof(a=n)||"[object Boolean]"===p(a))return o.set(t,e,!1);if("number"==typeof n)return o.set(t,e,0);if(h(n))n.length=0;else{if("object"!=typeof(i=n)||"[object Object]"!==p(i))return o.set(t,e,null);for(r in n)s(n,r)&&delete n[r]}var i,a}},o.push=function(t,e){var n=o.get(t,e);h(n)||o.set(t,e,n=[]),n.push.apply(n,Array.prototype.slice.call(arguments,2))},o.coalesce=function(t,e,n){for(var r,i=0,a=e.length;i<a;i++)if(void 0!==(r=o.get(t,e[i])))return r;return n},o.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return o.get(t,e.split("."),n);var r=l(e[0]),i=c(t,r);return void 0===i?n:1===e.length?i:o.get(t[r],e.slice(1),n)},o.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(f(e))return t;if("string"==typeof e)return o.del(t,e.split("."));var n=l(e[0]);return s(t,n)?1!==e.length?o.del(t[n],e.slice(1)):(h(t)?t.splice(n,1):delete t[n],t):t},o}var n=t();return n.create=t,n.withInheritedProps=t({includeInheritedProps:!0}),n}()}),tt={saga:null,initState:{},reducer:null,namespace:null,namespacePrefix:null,componentId:null,persistState:!0,allowedIncomingMulticastActionTypes:null,isServerSideRendering:!1},et=U(),nt=Symbol("COMPONENT_MANAGER_LOCAL_KEY"),rt=function(){function t(t,e,n){this.createClassNameGenerator=W.bind(this),this.componentInstance=t,this.options=h({},tt,e),this.appContainer=n,this.store=n.store,this.isInitialized=!1,this.isDestroyed=!1,this.initCallback=K,this.destroyCallback=K,this.storeListener=function(){var t=$.get(this.store.getState(),this.fullPath.split("/"));if(t===this.componentInstance.state)return;this.setState(t)}.bind(this),this.storeListenerUnsubscribe=null,this.managingInstance=t,this.displayName=function(t){try{return t.constructor.displayName||t.constructor.name||"Component"}catch(t){return"Component"}}(this.managingInstance);var r=function(t){if(!t)return"";{if("function"!=typeof t)return t+"";try{var e=t.bind(this,this.displayName,this.managingInstance)();return e||""}catch(t){return z("Failed to retrieve setting via executing generating function: "+t.getMessage(),"error",t),""}}}.bind(this);if(this.namespacePrefix||(this.namespacePrefix=Q(r(this.options.namespacePrefix))),-1!=this.namespacePrefix.indexOf("*"))throw Error("`namespacePrefix` cannot contain `*`.");if(this.namespace=Q(r(this.options.namespace)),-1!=this.namespace.indexOf("*"))throw Error("`Namespace` cannot contain `*`.");if(!this.namespace)throw Error("Missing Component `namespace`: Component `namespace` must be specified.");if(this.isAutoComponentId=!1,this.componentId=Q(r(this.options.componentId)),-1!=this.componentId.indexOf("/")||-1!=this.componentId.indexOf("*"))throw Error("`Component ID` cannot contain `/` or `*`.");this.componentId||(this.isAutoComponentId=!0,this.componentId=this.appContainer.componentRegistry.createComponentId(this.namespacePrefix,this.namespace)),this.componentInstance.props&&this.componentInstance.props.namespacePrefix&&(this.namespacePrefix=Q(r(this.componentInstance.props.namespacePrefix))),this.isServerSideRendering=this.options.isServerSideRendering,this.persistState=this.options.persistState,this.fullNamespace=function(){var t=[];this.namespacePrefix&&t.push(this.namespacePrefix);this.namespace&&t.push(this.namespace);return t.join("/")}.bind(this)(),this.fullPath=function(){var t=[];this.fullNamespace&&t.push(this.fullNamespace);return t.push(this.componentId),t.join("/")}.bind(this)(),this.fullLocalPath=function(){var t=[];this.namespace&&t.push(this.namespace);return t.push(this.componentId),t.join("/")}.bind(this)(),this.allowedIncomingMulticastActionTypes=this.options.allowedIncomingMulticastActionTypes,function(){var t=this.managingInstance.state;t||(t=this.options.initState);t||(t={});this.initState=h({},t)}.apply(this)}var e=t.prototype;return e.enhanceComponentInstance=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.initCallback=t),e&&(this.destroyCallback=e),this.componentInstance.state=this.initState,this.setState=this.isServerSideRendering?K:this.componentInstance.setState.bind(this.componentInstance),this.componentInstance.setState=function(){throw Error("This component is managed by `"+et+"`. You should dispatch action to mutate component state.")},this.storeListenerUnsubscribe=this.store.subscribe(this.storeListener),(this.componentInstance[nt]=this).isServerSideRendering?this.init():function(){var t=this.managingInstance.componentWillUnmount?this.managingInstance.componentWillUnmount:K;this.managingInstance.componentDidMount=function(t){this.init(),t&&"function"==typeof t&&t.apply(this.managingInstance)}.bind(this,this.managingInstance.componentDidMount?this.managingInstance.componentDidMount:K),this.managingInstance.componentWillUnmount=function(t){t&&"function"==typeof t&&t.apply(this.managingInstance);this.destroy()}.bind(this,t)}.apply(this)},e.dispatch=function(t,e){void 0===e&&(e="");var n=new V(this.fullPath).convertNamespacedAction(t,e),r=this.appContainer.actionRegistry.findNamespaceByActionType(n.type);return r?n.namespace=r:z("Cannot locate namespace for Action `"+X(n.type)+"`: `"+X(n.type)+"` needs to be registered otherwise the action won't be serializable."),this.store.dispatch(n)},e.init=function(){this.isInitialized||this.isDestroyed||(this.initCallback(this),this.isInitialized=!0)},e.getNamespaceData=function(){return this.appContainer.namespaceRegistry.getData(this.namespace)},e.destroy=function(){this.isDestroyed=!0,this.isInitialized&&(this.destroyCallback(this),this.storeListenerUnsubscribe&&(this.storeListenerUnsubscribe(),this.storeListenerUnsubscribe=null),this.appContainer=null,this.store=null,this.isInitialized=!1)},t}();var it={isServerSideRendering:!1},at=function(){function t(t,e){void 0===e&&(e={}),this.appContainer=t,this.options=h({},it,e),this.pathRegistry=new J,this.componentManagerStore={},this.componentAutoIdCounter={}}var e=t.prototype;return e.createComponentId=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter(function(t){return!!t}).join("/");return E(this.componentAutoIdCounter[r])?this.componentAutoIdCounter[r]+=1:this.componentAutoIdCounter[r]=0,"c"+this.componentAutoIdCounter[r]},e.register=function(t,e){var n=h({},this.options,e),r=new rt(t,n,this.appContainer);if(this.componentManagerStore[r.fullPath])throw Error("Try to register component to an existing path: "+r.fullPath);return(this.componentManagerStore[r.fullPath]=r).enhanceComponentInstance(function(t){t.options.reducer&&R(t.options.reducer)&&this.appContainer.reducerRegistry.register(t.options.reducer.bind(t.componentInstance),{initState:t.initState,path:t.fullPath,namespace:t.namespace,persistState:t.persistState,allowedIncomingMulticastActionTypes:t.allowedIncomingMulticastActionTypes});t.options.saga&&R(t.options.saga)&&this.appContainer.sagaRegistry.register(t.options.saga.bind(t.componentInstance),{path:t.fullPath,namespace:t.namespace,allowedIncomingMulticastActionTypes:t.allowedIncomingMulticastActionTypes})}.bind(this),ot.bind(this)),this.appContainer.namespaceRegistry.registerComponentManager(r),r},e.deregister=function(t){var e=t[nt];e&&ot.call(this,e)},e.destroy=function(){Object.values(this.componentManagerStore).map(function(t){return t.destroy()})},t}();function ot(t){t.options.reducer&&R(t.options.reducer)&&this.appContainer.sagaRegistry.deregister(t.fullPath),t.options.saga&&R(t.options.saga)&&this.appContainer.reducerRegistry.deregister(t.fullPath),this.appContainer.namespaceRegistry.deregisterComponentManager(t)}var st=Symbol("@@"+U()+"/INIT_STATE"),ct=Symbol("@@"+U()+"/EMPTY_STATE"),ut=Object.freeze({INIT_STATE:st,EMPTY_STATE:ct}),ft="io.github.t83714/"+U()+"/ReducerRegistry";function pt(t){return!0==(null!=(e=t)&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(t);var e}var ht=function(t){var e,n;return!1!==pt(t)&&("function"==typeof(e=t.constructor)&&(!1!==pt(n=e.prototype)&&!1!=n.hasOwnProperty("isPrototypeOf")))},lt=Object.prototype.hasOwnProperty;function dt(t){if(gt(t))return!1;if(!t)return!0;if(mt(t)&&0===t.length)return!0;if(yt(t))return!1;for(var e in t)if(lt.call(t,e))return!1;return!0}function gt(t){return"number"==typeof t}function yt(t){return"string"==typeof t}function mt(t){return Array.isArray(t)}function vt(t,e){for(var n in e)lt.call(e,n)&&(t[n]=e[n]);return t}function bt(t){var e=parseInt(t);return""+e===t?e:t}function wt(t,e,n){return null==t?e?n?[]:{}:t:mt(t)?t.slice():vt({},t)}function xt(t,e){if(t!==e&&ht(t)&&ht(e)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e.hasOwnProperty(r)?xt(t[r],e[r]):t[r]);for(r in e)e.hasOwnProperty(r)&&(n[r]=xt(t[r],e[r]));return n}return e}function St(t,e,n,r){if(gt(n)&&(n=[n]),dt(n))return e;if(yt(n))return St(t,e,n.split(".").map(bt),r);var i=n[0];return t&&t!==e||(t=wt(e,!0,gt(i))),1===n.length?r(t,i):(null!=e&&(e=e[i]),t[i]=St(t[i],e,n.slice(1),r),t)}var Rt={set:function(t,e,n,r){return dt(n)?r:St(t,e,n,function(t,e){return t[e]=r,t})},update:function(t,e,n,r){return dt(n)?r(wt(e)):St(t,e,n,function(t,e){return t[e]=r(t[e]),t})},push:function(t,e,n){var r=Array.prototype.slice.call(arguments,3);return dt(n)?mt(e)?e.concat(r):r:St(t,e,n,function(t,e){return t[e]=mt(t[e])?t[e].concat(r):r,t})},insert:function(t,e,i,a,o){if(o=~~o,dt(i)){if(!mt(e))return[a];var n=e.slice(0,o);return n.push(a),n.concat(e.slice(o))}return St(t,e,i,function(t,e){var n=t[e];if(!mt(n)){if(null!=n&&void 0!==n)throw Error("Expected "+i+"to be an array. Instead got "+typeof i);n=[]}var r=n.slice(0,o);return r.push(a),t[e]=r.concat(n.slice(o)),t})},del:function(t,e,n){if(!dt(n))return St(t,e,n,function(t,e){return Array.isArray(t)?void 0!==t[e]&&t.splice(e,1):t.hasOwnProperty(e)&&delete t[e],t})},assign:function(t,e,n,r){return dt(n)?dt(r)?e:vt(wt(e),r):St(t,e,n,function(t,e){r=Object(r);var n=wt(t[e],!0);return vt(n,r),t[e]=n,t})},merge:function(t,e,n,r){return dt(n)?dt(r)?e:xt(e,r):St(t,e,n,function(t,e){return t[e]=xt(t[e],r=Object(r)),t})}},Et=Object.keys(Rt).reduce(function(t,e){return t[e]=Rt[e].bind(null,null),t},function(n){var r=n,i=!1,a=Object.keys(Rt).reduce(function(t,e){return"function"==typeof Rt[e]&&(t[e]=function(){var t=[r,n].concat(Array.prototype.slice.call(arguments));if(i)throw Error("Cannot call "+e+" after `value`");return r=Rt[e].apply(null,t),a}),t},{});return a.value=function(){return i=!0,r},a}),kt={initState:{},persistState:!0};function Ot(t,e,n){if(!P(n))return e;var r,i,a,o,s=e;switch(n.type){case st:s=function(t,e){var n=e.payload,r=n.data,i=n.persistState,a=n.path.split("/"),o=i;if($.has(t,a)&&o){var s=$.get(t,a);return Et.assign(t,a,s)}return Et.assign(t,a,r)}(s,n);break;case ct:r=s,a=(i=n.payload).data,o=i.path.split("/"),s=Et.update(r,o,function(e){return Object.keys(a).forEach(function(t){delete e[t]}),e})}return s=function(a,o){var s=this;if(!T(o))return a;var t=this.pathRegistry.searchDispatchPaths(o);if(!t||!t.length)return a;var c=a;return t.forEach(function(t){var e=s.reducerStore[t].reducer;if(e&&"function"==typeof e){var n=t.split("/"),r=$.get(a,n),i=e(r,o);r!==i&&(c=Et.assign(c,n,i))}}),c}.call(this,s,n),t&&"function"==typeof t&&(s=t(s,n)),s}var Ct=function(){function t(t){this.appContainer=t,this.reducerStore={},this.pathRegistry=new J(!0),this.appContainer.actionRegistry.register(ft,ut)}var e=t.prototype;return e.destroy=function(){this.pathRegistry.destroy(),this.appContainer=null},e.createGlobalReducer=function(t){return void 0===t&&(t=null),Ot.bind(this,t)},e.register=function(t,e){if(!t||"function"!=typeof t)throw Error("Failed to register reducer: invalid reducer parameter.");e||(e=h({},kt));var n=e.path,r=e.namespace,i=e.initState,a=e.persistState,o=e.allowedIncomingMulticastActionTypes;if(!n)throw Error("Failed to register namespaced reducer: namespace path cannot be empty!");var s=Q(n),c=r?s.lastIndexOf(r):s.length;if(null===this.pathRegistry.add(s,{localPathPos:c,namespace:r,allowedIncomingMulticastActionTypes:o}))throw Error("Failed to register namespaced reducer: given path `"+s+"` has been registered.");this.reducerStore[s]=h({},e,{reducer:t,initState:i,persistState:a,allowedIncomingMulticastActionTypes:o,path:s}),function(t,e,n){if(!this.appContainer.store)throw Error("Failed to set init state for component reducer: redux store not available yet!");this.appContainer.store.dispatch((r=t,i=e,a=n,{type:st,namespace:ft,payload:{path:r,data:i,persistState:a}}));var r,i,a}.call(this,s,i,a)},e.deregister=function(t){var e=Q(t);this.pathRegistry.remove(e);var n=this.reducerStore[e];n&&(delete this.reducerStore[e],n.persistState||function(t,e){if(!this.appContainer.store)throw Error("Failed to set init state for component reducer: redux store not available yet!");this.appContainer.store.dispatch((n=t,r=e,{type:ct,namespace:ft,payload:{path:n,data:r}}));var n,r}.call(this,e,n.initState))},t}();var At=r(function(T){!function(t){var c,e=Object.prototype,u=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag",o=t.regeneratorRuntime;if(o)T.exports=o;else{(o=t.regeneratorRuntime=T.exports).wrap=v;var f="suspendedStart",p="suspendedYield",h="executing",l="completed",d={},s={};s[i]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==e&&u.call(y,i)&&(s=y);var m=S.prototype=w.prototype=Object.create(s);x.prototype=m.constructor=S,S.constructor=x,S[a]=x.displayName="GeneratorFunction",o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(m),t},o.awrap=function(t){return{__await:t}},R(E.prototype),E.prototype[r]=function(){return this},o.AsyncIterator=E,o.async=function(t,e,n,r){var i=new E(v(t,e,n,r));return o.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},R(m),m[a]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},o.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return a.type="throw",a.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}!i||"break"!==t&&"continue"!==t||e<i.tryLoc||i.finallyLoc<e||(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),d}}}function v(t,e,n,r){var a,o,s,c,i=Object.create((e&&e.prototype instanceof w?e:w).prototype),u=new A(r||[]);return i._invoke=(a=t,o=n,s=u,c=f,function(t,e){if(c===h)throw Error("Generator is already running");if(c===l){if("throw"===t)throw e;return P()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=k(n,s);if(r){if(r===d)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===f)throw c=l,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=h;var i=b(a,o,s);if("normal"===i.type){if(c=s.done?l:p,i.arg===d)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(c=l,s.method="throw",s.arg=i.arg)}}),i}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function x(){}function S(){}function R(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function E(c){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var a=b(c[t],c,n);if("throw"!==a.type){var o=a.arg,s=o.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)})}i(a.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function k(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,k(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=b(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:c,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())}),It=function(){return this||"object"==typeof self&&self}()||Function("return this")(),Pt=It.regeneratorRuntime&&0<=Object.getOwnPropertyNames(It).indexOf("regeneratorRuntime"),Tt=Pt&&It.regeneratorRuntime;It.regeneratorRuntime=void 0;var jt=At;if(Pt)It.regeneratorRuntime=Tt;else try{delete It.regeneratorRuntime}catch(t){It.regeneratorRuntime=void 0}var Dt=jt,Lt=Symbol("@@"+U()+"/INIT_SAGA"),Mt=Symbol("@@"+U()+"/CANCEL_SAGA"),Nt=Object.freeze({INIT_SAGA:Lt,CANCEL_SAGA:Mt}),_t="io.github.t83714/"+U()+"/SagaRegistry",Ft=function(){function t(t){void 0===t&&(t=null),this.buffer=t||f.buffers.expanding(),this.eventEmitters=[]}var e=t.prototype;return e.subscribe=function(t){this.unsubscribe(t),this.eventEmitters.push(t)},e.unsubscribe=function(e){this.eventEmitters=this.eventEmitters.filter(function(t){return t!==e})},e.dispatch=function(e){this.eventEmitters.forEach(function(t){return t(e)})},e.destroy=function(){this.eventEmitters=[]},e.create=function(t){var e=this;return f.eventChannel(function(t){return e.subscribe(t),function(){e.unsubscribe(t)}},this.buffer,t||Y)},t}();function Ut(t,e){if(!e)throw Error("effects.take: pattern parameter cannot be empty!");return p.take(t.chan,e)}function Gt(t,e,n){void 0===n&&(n="");var r=new V(t.path).convertNamespacedAction(e,n),i=this.appContainer.actionRegistry.findNamespaceByActionType(r.type);return i?r.namespace=i:z("Cannot locate namespace for Action `"+X(r.type)+"`: `"+X(r.type)+"` needs to be registered otherwise the action won't be serializable."),p.put(r)}var zt=function(n,r,i){for(var t=arguments.length,a=Array(3<t?t-3:0),e=3;e<t;e++)a[e-3]=arguments[e];return p.fork(Dt.mark(function t(){var e;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ut(n,r);case 3:return e=t.sent,t.next=6,p.fork.apply(void 0,[i].concat(a.concat(e)));case 6:t.next=0;break;case 8:case"end":return t.stop()}},t,this)}))},Bt=Object.freeze({take:Ut,takeMaybe:function(t,e){if(!e)throw Error("effects.take: pattern parameter cannot be empty!");return p.takeMaybe(t.chan,e)},put:Gt,select:function(t,n){for(var e=arguments.length,r=Array(2<e?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var a=t.path.split("/");return p.select(function(t){var e=$.get(t,a);return n&&R(n)?n.apply(void 0,[e].concat(r)):e})},takeEvery:zt,takeLatest:function(r,i,a){for(var t=arguments.length,o=Array(3<t?t-3:0),e=3;e<t;e++)o[e-3]=arguments[e];return p.fork(Dt.mark(function t(){var e,n;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ut(r,i);case 3:if(n=t.sent,e)return t.next=7,p.cancel(e);t.next=7;break;case 7:return t.next=9,p.fork.apply(void 0,[a].concat(o.concat(n)));case 9:e=t.sent,t.next=0;break;case 12:case"end":return t.stop()}},t,this)}))},takeLeading:function(n,r,i){for(var t=arguments.length,a=Array(3<t?t-3:0),e=3;e<t;e++)a[e-3]=arguments[e];return p.fork(Dt.mark(function t(){var e;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ut(n,r);case 3:return e=t.sent,t.next=6,p.call.apply(void 0,[i].concat(a.concat(e)));case 6:t.next=0;break;case 8:case"end":return t.stop()}},t,this)}))},throttle:function(r,i,a,o){for(var t=arguments.length,s=Array(4<t?t-4:0),e=4;e<t;e++)s[e-4]=arguments[e];return p.fork(Dt.mark(function t(){var n,e;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.call(f.channel,f.buffers.sliding(1));case 2:return n=t.sent,t.next=5,zt(r,a,Dt.mark(function t(e){return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.put(n,e);case 2:case"end":return t.stop()}},t,this)}));case 5:return t.next=8,p.take(n);case 8:return e=t.sent,t.next=11,p.fork.apply(void 0,[o].concat(s,[e]));case 11:return t.next=13,p.delay(i);case 13:t.next=5;break;case 15:case"end":return t.stop()}},t,this)}))},debounce:function(i,a,o,s){for(var t=arguments.length,c=Array(4<t?t-4:0),e=4;e<t;e++)c[e-4]=arguments[e];return p.fork(Dt.mark(function t(){var e,n,r;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ut(i,o);case 3:e=t.sent;case 4:return t.next=7,p.race({debounced:p.delay(a),_action:Ut(i,o)});case 7:if(r=(n=t.sent)._action,n.debounced)return t.next=13,p.fork.apply(void 0,[s].concat(c,[e]));t.next=14;break;case 13:return t.abrupt("break",17);case 14:e=r,t.next=4;break;case 17:t.next=0;break;case 19:case"end":return t.stop()}},t,this)}))},actionChannel:function(e,i,a){return p.call(Dt.mark(function t(){var n,r;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.chan,t.next=3,p.call(f.channel,a);case 3:return r=t.sent,t.prev=4,t.next=7,p.fork(Dt.mark(function t(){var e;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ut(n,i);case 3:return e=t.sent,t.next=6,Gt(r,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},t,this)}));case 7:return t.prev=7,r&&r.close(),t.finish(7);case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this,[[4,,7,10]])}))}}),qt=function(e,n){var r={};return Object.keys(Bt).forEach(function(t){r[t]=Bt[t].bind(e,n)}),Object.keys(p).forEach(function(t){x(r[t])&&(r[t]=R(p[t])?p[t].bind(e):p[t])}),r},Yt=Dt.mark(Jt),Kt=Dt.mark(Qt),Wt=Dt.mark($t),Xt=Dt.mark(te),Ht=Dt.mark(ee),Vt=Dt.mark(ne);function Jt(){return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.fork([this,Qt]);case 2:return t.next=4,p.fork([this,Zt]);case 4:case"end":return t.stop()}},Yt,this)}var Zt=Dt.mark(function t(){return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.takeEvery(function(t){return T(t)},Dt.mark(function t(e){var n,r,i;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.pathRegistry.searchDispatchPaths(e))&&n.length){t.next=3;break}return t.abrupt("return");case 3:r=0;case 4:if(r>=n.length){t.next=13;break}if((i=this.namespacedSagaItemStore[n[r]])&&i.chan){t.next=8;break}return t.abrupt("continue",10);case 8:return t.next=10,p.put(i.chan,e);case 10:r++,t.next=4;break;case 13:case"end":return t.stop()}},t,this)}).bind(this));case 2:case"end":return t.stop()}},t,this)});function Qt(){var e,n;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.call([this.hostSagaCommandChan,this.hostSagaCommandChan.create]);case 3:e=t.sent;case 4:return t.next=7,p.take(e);case 7:return n=t.sent,t.next=10,p.fork([this,$t],n);case 10:t.next=4;break;case 12:return t.prev=12,t.next=15,p.cancelled();case 15:if(!t.sent){t.next=17;break}e.close();case 17:return t.finish(12);case 18:case"end":return t.stop()}},Kt,this,[[0,,12,18]])}function $t(e){var n,r;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.payload,t.t0=n=e.type,t.next=t.t0===Lt?4:t.t0===Mt?7:10;break;case 4:return t.next=6,p.call([this,te],r);case 6:return t.abrupt("break",11);case 7:return t.next=9,p.call([this,ne],r);case 9:return t.abrupt("break",11);case 10:throw Error("Unknown host command action: "+n);case 11:case"end":return t.stop()}},Wt,this)}function te(e){var n,r,i,a,o,s,c,u;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.saga,r=e.namespace,i=e.allowedIncomingMulticastActionTypes,a=Q(e.path)){t.next=6;break}return t.next=5,p.call([this,ee],n);case 5:return t.abrupt("return");case 6:if(o=r?a.lastIndexOf(r):a.length,null===this.pathRegistry.add(a,{localPathPos:o,namespace:r,allowedIncomingMulticastActionTypes:i}))throw Error("Failed to register namespaced saga: given path `"+a+"` has been registered.");t.next=9;break;case 9:return t.next=11,p.call(f.multicastChannel);case 11:return s=h({},e,{chan:t.sent,path:a,allowedIncomingMulticastActionTypes:i}),c=qt(this,s),t.next=16,p.fork(Dt.mark(function t(){return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.call(n,c);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),z("Error thrown from saga registered at `"+a+"`: ","error",t.t0);case 8:case"end":return t.stop()}},t,this,[[0,5]])}));case 16:u=h({},s,{task:t.sent}),this.namespacedSagaItemStore[a]=u;case 19:case"end":return t.stop()}},Xt,this)}function ee(e){return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.fork(Dt.mark(function t(){return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.call(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),z("Error thrown from registered global saga: ","error",t.t0);case 8:case"end":return t.stop()}},t,this,[[0,5]])}));case 2:this.globalSagaTaskList.push(t.sent);case 4:case"end":return t.stop()}},Ht,this)}function ne(e){var n,r,i=this;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=12;break}if(n=Q(e),this.pathRegistry.remove(n),r=this.namespacedSagaItemStore[n]){t.next=6;break}return t.abrupt("return");case 6:return delete this.namespacedSagaItemStore[n],r.chan.close(),t.next=10,p.cancel(r.task);case 10:t.next=16;break;case 12:return Object.keys(this.namespacedSagaItemStore).forEach(function(t){i.namespacedSagaItemStore[t].task===e&&delete i.namespacedSagaItemStore[t]}),this.globalSagaTaskList=this.globalSagaTaskList.filter(function(t){return t!==e}),t.next=16,p.cancel(e);case 16:case"end":return t.stop()}},Vt,this)}var re=function(){function t(t){this.appContainer=t,this.namespacedSagaItemStore={},this.globalSagaTaskList=[],this.pathRegistry=new J(!0),this.hostSagaCommandChan=new Ft(f.buffers.expanding()),this.appContainer.actionRegistry.register(_t,Nt)}var e=t.prototype;return e.createHostSaga=function(){return Jt.bind(this)},e.register=function(t,e){if(!t||"function"!=typeof t)throw Error("SagaRegistry::register: saga parameter cannot be empty!");var n=h({saga:t},C(e)?e:{});this.hostSagaCommandChan.dispatch({type:Lt,namespace:_t,payload:n})},e.deregister=function(t){if(!t)throw Error("SagaRegistry::deregister: pathOrTask parameter cannot be empty!");this.hostSagaCommandChan.dispatch({type:Mt,namespace:_t,payload:t})},e.destroy=function(){this.hostSagaCommandChan.destroy(),this.appContainer=null,this.globalSagaTaskList=[],this.pathRegistry.destroy()},t}(),ie=function(){function t(){this.effectTriggered=[],this.effectResolved=[],this.effectRejected=[],this.effectCancelled=[],this.actionDispatched=[]}var e=t.prototype;return e.register=function(t){if(!t||!C(t))throw Error("SagaMoniterRegistry.register: Invalid moniter");R(t.effectTriggered)&&this.effectTriggered.push(t.effectTriggered),R(t.effectResolved)&&this.effectResolved.push(t.effectResolved),R(t.effectRejected)&&this.effectRejected.push(t.effectRejected),R(t.effectCancelled)&&this.effectCancelled.push(t.effectCancelled),R(t.actionDispatched)&&this.actionDispatched.push(t.actionDispatched)},e.deregister=function(e){if(!e||!C(e))throw Error("SagaMoniterRegistry.deregister: Invalid moniter");R(e.effectTriggered)&&(this.effectTriggered=this.effectTriggered.filter(function(t){return t!==e.effectTriggered})),R(e.effectResolved)&&(this.effectResolved=this.effectResolved.filter(function(t){return t!==e.effectResolved})),R(e.effectRejected)&&(this.effectRejected=this.effectRejected.filter(function(t){return t!==e.effectRejected})),R(e.effectCancelled)&&(this.effectCancelled=this.effectCancelled.filter(function(t){return t!==e.effectCancelled})),R(e.actionDispatched)&&(this.actionDispatched=this.actionDispatched.filter(function(t){return t!==e.actionDispatched}))},e.destroy=function(){this.effectTriggered=[],this.effectResolved=[],this.effectRejected=[],this.effectCancelled=[],this.actionDispatched=[]},e.getCombinedMonitor=function(){var t=this;return{effectTriggered:function(e){t.effectTriggered.length&&t.effectTriggered.forEach(function(t){try{t(e)}catch(t){z("Error when executing saga moniter `effectTriggered`.","error",t)}})},effectResolved:function(e,n){t.effectResolved.length&&t.effectResolved.forEach(function(t){try{t(e,n)}catch(t){z("Error when executing saga moniter `effectResolved`.","error",t)}})},effectRejected:function(e,n){t.effectRejected.length&&t.effectRejected.forEach(function(t){try{t(e,n)}catch(t){z("Error when executing saga moniter `effectRejected`.","error",t)}})},effectCancelled:function(e){t.effectCancelled.length&&t.effectCancelled.forEach(function(t){try{t(e)}catch(t){z("Error when executing saga moniter `effectCancelled`.","error",t)}})},actionDispatched:function(e){t.actionDispatched.length&&t.actionDispatched.forEach(function(t){try{t(e)}catch(t){z("Error when executing saga moniter `actionDispatched`.","error",t)}})}}},t}(),ae=function(e){var n={};if(A(e))n[X(e)]=e;else if(O(e)&&e.length)e.forEach(function(t){if(!A(t))throw Error("ActionRegistry: Action type must be a symbol.");n[X(t)]=t});else{if(!C(e))throw Error("ActionRegistry: actionTypes must be a symbol or a list / array of symbols.");Object.keys(e).forEach(function(t){if(!A(e[t]))throw Error("ActionRegistry: Action type must be a symbol.");n[X(e[t])]=e[t]})}return n},oe=function(){function t(){this.pathRegistry=new J}var e=t.prototype;return e.destroy=function(){this.pathRegistry.destroy()},e.register=function(t,e){t=Q(t);var n=ae(e);if(this.pathRegistry.exist(t)){var r=this.pathRegistry.getPathData(t),i=Object.assign({},C(r.actionList)?r.actionList:{},n);this.pathRegistry.setPathData(t,h({},r,{actionList:i}))}else this.pathRegistry.add(t,{actionList:n})},e.deregister=function(t,e){if(void 0===e&&(e=null),t=Q(t),this.pathRegistry.exist(t))if(e){var n=Object.values(ae(e)),r=this.pathRegistry.getPathData(t).actionList,i=Object.keys(r).filter(function(t){return-1==n.indexOf(r[t])});i.length?(i.forEach(function(t){delete r[t]}),this.pathRegistry.setPathData({actionList:r})):this.pathRegistry.remove(t)}else this.pathRegistry.remove(t)},e.findNamespaceByActionType=function(e){return this.pathRegistry.searchPathByPathData(function(t){return-1!=Object.values(t.actionList).indexOf(e)})},e.serialiseAction=function(t){if(!P(t))throw Error("serialiseAction: Cannot action parameter is not a valid Action.");var e=t.namespace,n=t.type;if(!e)throw Error("serialiseAction: Cannot locate namespace property from action parameter");var r=this.pathRegistry.getPathData(e).actionList;if(!C(r)||!Object.keys(r).length||-1===!Object.values(r).indexOf(t))throw Error("serialiseAction: the action type is not register yet.");var i=h({},t,{type:X(n)});return!0===t[w]&&(i[X(w)]=!0),JSON.stringify(i)},e.deserialiseAction=function(t){var e=JSON.parse(t);if(!e||!e.namespace)throw Error("Cannot deserialise action without namespace property!");!0===e[X(w)]&&(e[w]=!0);var n=this.pathRegistry.getPathData(e.namespace).actionList;if(!C(n))throw Error("Cannot deserialise unregistered action!");var r=n[e.type];if(!r)throw Error("Cannot deserialise unregistered action!");return e.type=r,e},t}(),se=function(){function t(t){this.appContainer=t,this.pathRegistry=new J}var e=t.prototype;return e.destroy=function(){this.pathRegistry.destroy(),this.appContainer=null},e.registerComponentManager=function(t){var e=t.namespace,n=t.options,r=n.namespaceInitCallback,i=n.namespaceDestroyCallback,a=n.actionTypes;this.pathRegistry.exist(e)?this.pathRegistry.getPathData(e).cmList.push(t):(a&&this.appContainer.actionRegistry.register(e,a),this.pathRegistry.add(e,{cmList:[t],namespaceData:R(r)?r(t):{},namespaceInitCallback:r,namespaceDestroyCallback:i,actionTypes:a}))},e.deregisterComponentManager=function(e){var t=e.namespace,n=this.pathRegistry.getPathData(t),r=n.cmList,i=n.namespaceDestroyCallback,a=n.namespaceData;(r=r.filter(function(t){return t!==e})).length||(this.pathRegistry.remove(t),this.appContainer.actionRegistry.deregister(t),R(i)&&i(a))},e.getData=function(t){return this.pathRegistry.getPathData(t).namespaceData},e.foreach=function(n){this.pathRegistry.foreach(function(t,e){return n(t.namespaceData,e)})},e.map=function(n){return this.pathRegistry.map(function(t,e){return n(t.namespaceData,e)})},t}(),ce=Object.keys(ut).map(function(t){return ut[t]}).concat(Object.keys(Nt).map(function(t){return Nt[t]})),ue={actionSanitizer:function(t){return h({},t,{type:A(t.type)?X(t.type):t.type})},predicate:function(t,e){return e&&-1==ce.indexOf(e.type)}},fe={reducer:null,initState:{},middlewares:[],reduxDevToolsDevOnly:!0,devToolOptions:h({},ue),sagaMiddlewareOptions:{},isServerSideRendering:!1},pe=function(){function t(t){void 0===t&&(t={}),this.store=null,this.sagaMonitorRegistry=new ie,this.actionRegistry=new oe,this.namespaceRegistry=new se(this);var e=h({},fe,t);t&&t.devToolOptions&&(e.devToolOptions=h({},ue,t.devToolOptions));var n=function(t,e){if("object"!=typeof window||!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)return u;if(t&&!G())return u;var n=h({},e||{});return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(n)}(e.reduxDevToolsDevOnly,e.devToolOptions),r=a(h({},e.sagaMiddlewareOptions,{sagaMonitor:this.sagaMonitorRegistry.getCombinedMonitor()})),i=e.middlewares.concat([r]);this.eventEmitters=[],this.componentRegistry=new at(this,{isServerSideRendering:e.isServerSideRendering}),this.reducerRegistry=new Ct(this),this.sagaRegistry=new re(this),this.store=g(this.reducerRegistry.createGlobalReducer(e.reducer),h({},e.initState),n(y.apply(void 0,i))),this.hostSagaTask=r.run(this.sagaRegistry.createHostSaga())}var e=t.prototype;return e.registerComponent=function(t,e){return this.componentRegistry.register(t,e)},e.deregisterComponent=function(t){this.componentRegistry.deregister(t)},e.subscribeActionDispatch=function(t){this.sagaMonitorRegistry.register({actionDispatched:t})},e.waitForActionsUntil=function(r,t){var i=this;return void 0===t&&(t=5e3),new Promise(function(e,n){setTimeout(function(){var t=Error("waitForActionsUntil timeout");t.isTimeout=!0,n(t)},t),i.subscribeActionDispatch(function(t){r(t)&&e()})})},e.dispatch=function(t,e){void 0===e&&(e="");var n=new V("").convertNamespacedAction(t,e),r=this.actionRegistry.findNamespaceByActionType(n.type);return r?n.namespace=r:z("Cannot locate namespace for Action `"+X(n.type)+"`: `"+X(n.type)+"` needs to be registered otherwise the action won't be serializable."),this.store.dispatch(n)},e.destroy=function(){this.componentRegistry.destroy(),this.hostSagaTask&&(this.hostSagaTask.cancel(),this.hostSagaTask=null),this.sagaRegistry.destroy(),this.reducerRegistry.destroy(),this.sagaMonitorRegistry.destroy(),this.actionRegistry.destroy(),this.namespaceRegistry.destroy()},t}(),he="appContainer",le=null;function de(t){if(void 0===t&&(t={}),le)return z("AppContainerUtils.createAppContainer: Existing appContainer found. The appContainer options supplied was ignored. Existing appContainer will be used.","warn"),le;var e=new pe(t);return le=e}function ge(t){if(void 0===t&&(t=null),t){if(t.props&&t.props[he])return t.props[he];if(t.context&&t.context[he])return t.context[he]}return le||(le=de()),le}function ye(t,e){return ge(t).registerComponent(t,e)}var me=Object.freeze({createAppContainer:de,getAppContainer:ge,registerComponent:ye,deregisterComponent:function(t){return ge(t).deregisterComponent(t)},registerSaga:function(t,e,n){return void 0===n&&(n=null),ge(n).sagaRegistry.register(t,e)},deregisterSaga:function(t,e){return void 0===e&&(e=null),ge(e).sagaRegistry.deregister(t)},registerReducer:function(t,e,n){return void 0===n&&(n=null),ge(n).reducerRegistry.register(t,e)},deregisterReducer:function(t,e){return void 0===e&&(e=null),ge(e).reducerRegistry.deregister(t)},registerActions:function(t,e,n){return void 0===n&&(n=null),ge(n).actionRegistry.register(t,e)},serialiseAction:function(t,e){return void 0===e&&(e=null),ge(e).actionRegistry.serialiseAction(t)},deserialiseAction:function(t,e){return void 0===e&&(e=null),ge(e).actionRegistry.deserialiseAction(t)},findNamespaceByActionType:function(t,e){return void 0===e&&(e=null),ge(e).actionRegistry.findNamespaceByActionType(t)},destroyAppContainer:function(t){void 0===t&&(t=null);var e=ge(t);e.destroy(),e===le&&(le=null)},updateAppContainerRetrieveKey:function(t){var e=he;return he=t,e}});var ve=function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e};var be=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},we=Dt.mark(Se),xe=function(n){function t(t){var e;return(e=n.call(this,t)||this).appContainer=ge(),e.componentManager=ye(be(be(e)),{namespace:"io.github.t83714/ActionForwarder",saga:Se.bind(be(be(e))),allowedIncomingMulticastActionTypes:"*"}),e}return ve(t,n),t.prototype.render=function(){return null},t}(e.Component);function Se(i){return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.takeEvery(this.props.pattern?this.props.pattern:"*",Dt.mark(function t(e){var n,r;return Dt.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentSenderPath===this.componentManager.fullPath)return t.abrupt("return");t.next=2;break;case 2:return n=Re(e,this.props.transformer),r=this.props.relativeDispatchPath?"../../../"+this.props.relativeDispatchPath:"",t.next=6,i.put(n,r);case 6:case"end":return t.stop()}},t,this)}).bind(this));case 2:case"end":return t.stop()}},we,this)}function Re(t,e){if(!e)return t;var n=t;return A(e)?n=h({},t,{type:e}):R(e)&&(n=e(t)),n}xe.propTypes={namespacePrefix:n.string.isRequired,pattern:n.oneOfType([n.symbol,n.func,n.arrayOf(n.oneOfType([n.string,n.func]))]),relativeDispatchPath:n.string,transformer:n.oneOfType([n.symbol,n.func])},t.AppContainer=pe,t.AppContainerUtils=me,t.ActionForwarder=xe,t.utils=H,Object.defineProperty(t,"__esModule",{value:!0})});
